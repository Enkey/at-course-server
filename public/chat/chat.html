<div class="chat-loading" ng-show="loadingMessages">
    Loading...
</div>
<div class="chat-ready" ng-show="!loadingMessages">
    <div class="online-users-count">
        <a ng-click="showModalDialog()">Users online: {{users.length}}</a>
    </div>
    <div id="usersModalDialog" class="modal fade" role="dialog" tabindex="-1">
        <div class="modal-dialog">
            <!--Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><strong>Online users</strong></h4>
                </div>
                <div class="modal-body panel-group">
                    <div class="panel">
                        <ul>
                            <li ng-repeat="user in users">
                                <img ng-src="{{user.avatar}}" width="45">
                                {{user.username}}
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="chat" id="chat-box">
        <div class="messages-list">
            <div ng-repeat="message in messages track by $index" ng-class="getMessageClass(message)" scroll-bottom>
                <div class="chat-message-main">
                    <div class="chat-message-text">
                        {{message.text}}
                    </div>
                </div>
                <div class="chat-message-date"><span>21.01.2016</span><span>10:00:00</span></div>
                <div class="chat-message-avatar">
                    <div class="item_user-avatar">
                        <img ng-src="{{message.user.avatar}}">
                    </div>
                    <div class="item_user-username">{{message.user.username}}</div>
                </div>
            </div>
        </div>
    </div>
    <div class="chat-bottom-controls row">
        <form class="col-xs-12">
            <div class="chat-control-textarea">
                <textarea class="form-control" name="message_text" on-enter="sendMessage()"
                          ng-model="message"></textarea>
            </div>
            <div class="chat-control-button send">
                <a ng-click="sendMessage()">
                    <img src="/images/fa-send.png" alt="">
                </a>
            </div>

        </form>
    </div>
</div>